# GDB 技巧



gdb 基本上是每个 unix 环境开发者都会使用的调试工具，使用 gdb 基本上可以按照自己的需求随心所欲的运行程序， 可让被调试的程序在自己所指定的断点处停住，同时可以检查程序当前的状态，检查各种变量及寄存器的值，也可以 动态的改变程序的执行环境。



### gdb 调试的三种方法

1. `gdb filename`：run 开始、quit 结束
2. `gdb attach pid`：程序已经运行后，可使用 attach 跟踪进程，attach 目标进程后，调试器会暂停下来，需要 continue 才继续， 停止调试后使用 detach 命令分离调试器，quit 结束
3. `gdb filename corename` ：默认不开启 core，需要设置 core 文件大小，使用 `ulimit -a` 可查看 core 文件大小，使用 `ulimit -c [n]` 设置 core 文件最大 n 字节，使用 `ulimit -c unlimited` 表示修改为不限制大小。



**自定义 core 文件名称**

core 文件的默认路径和名称为当前工作目录下生成的"core"，通过如下方式可修改 core 的目录和文件名称：

```sh
echo "/root/test/core-%e-%p-%t" > /proc/sys/kernel/core_pattern
%p->pid 
%u->uid 
%g->gid 
%s->signal 
%t->timestamp
%h->hostname 
%e->exectable nam
```



### 常用命令

看本子笔记吧



如果在gdb中使用call命令调用公有成员函数时出现“Couldn't find method”的错误，可能有以下几个原因：
1. **类对象未正确初始化**：确保类对象已经正确初始化。如果对象未正确初始化，可能无法访问其中的成员函数。
2. **符号信息不可用**：在生成可执行文件时，可能没有包含足够的调试信息，导致gdb无法找到该方法。确保在生成可执行文件时启用了调试信息选项（例如使用-g选项）。
3. **成员函数名称错误**：确认所调用的成员函数名称是否正确拼写，包括大小写和命名空间等。
4. **类定义不可见**：如果类定义位于其他文件中（例如头文件），确保在gdb中已经包含了相关的源文件和头文件。



如果尝试了上述解决方法仍然无法解决问题，可以考虑使用其他调试技术，如打印调试信息、添加日志语句等，以获取所需的成员变量值。

### p 命令

打印局部/全局变量 : p 变量

### call 命令

调用函数/get : call 变量.函数名() （需要确保 -g 编译，否则符号信息不可用）

### info thread 命令

查看运行线程

New LWP 是什么意思：线程产生通知：在产生新的线程时, gdb会给出提示信息

查看线程：使用info threads可以查看运行的线程





































